"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[668],{7668:function(e,t,n){n.r(t),n.d(t,{default:function(){return z}});var i=n(9268);class r{constructor(e,t){this.type=e,this.value=t}}let s={LET:"let",FUNCTION:"function",RETURN:"return",IF:"if",ELSE:"else",ELSEIF:"elif"},o={ILLEGAL:"ILLEGAL",EOF:"EOF",IDENTIFIER:"IDENTIFIER",NUMBER:"NUMBER",STRING:"STRING",PLUS:"+",ASSIGN:"=",MINUS:"-",ASTERISK:"*",FRONT_SLASH:"/",EXCLAMATION_MARK:"!",GREATER_THAN:">",LESS_THAN:"<",LESSEQUAL_THAN:"<=",GREATEREQUAL_THAN:">=",EQUALS:"==",NOT_EQUAL:"!=",LOG_OR:"|",LOG_AND:"&",COMMA:",",SEMICOLON:";",LPAREN:"(",RPAREN:")",LBRACE:"{",RBRACE:"}",LSQUARE:"[",RSQUARE:"]",...s},h=new Map(Object.entries(s).map(e=>[e[1],e[0]]));function a(){if('"'==this.consumeCharacter()){let e="";for(;'"'!=this.getCharacter();)e=e.concat(this.getCharacter()),this.incrementPosition();return this.createToken(o.STRING,e)}if("'"==this.consumeCharacter()){let e="";for(;"'"!=this.getCharacter();)e=e.concat(this.getCharacter()),this.incrementPosition();return this.createToken(o.STRING,e)}}function c(e){return!!e&&(!!e&&RegExp("^[a-zA-Z]$").test(e)||"_"===e)}function u(e){return!!e&&RegExp("^[0-9]$").test(e)}let l={LOWEST:1,"<":2,">":2,"==":2,"<=":2,">=":2,"!=":2,"+":3,"-":3,"/":5,"*":5,PREFIX:8,SUFFIX:9,CALL:10};class f{constructor(e,t){this.type=e,this.value=t}}class T extends f{constructor(e){super("NumberLiteral",e)}}class d extends f{constructor(e){super("StringLiteral",e)}}class E{constructor(e){this.type=e}}class p extends f{constructor(e,t,n,i){super("".concat(e,"InfixExpression"),t),this.left=n,this.right=i}}class k extends f{constructor(e,t,n){super("".concat(e,"PrefixExpression"),t),this.right=n}}class x extends E{constructor(e){super("STATEMENT_BLOCK"),this.statements=e}}class g extends E{constructor(e,t){super("LET_STATEMENT"),this.value=t,this.identifier=e}}class N extends E{constructor(e,t){super("IF_STATEMENT"),this.condition=e,this.body=t}}class A extends E{constructor(e,t){super("ELIF_STATEMENT"),this.condition=e,this.body=t}}class m extends E{constructor(e){super("ELSE_STATEMENT"),this.body=e}}class L extends E{constructor(e,t,n){super("FUNCTION_STATEMENT"),this.identifier=e,this.args=t,this.body=n}}class S extends f{constructor(e,t){super("FUNCTION_CALL",e.value),this.identifier=e,this.args=t}}class I extends E{constructor(e){super("RETURN_STATEMENT"),this.value=e}}function R(){let e=this.consumeAfterToken();this.incrementToken();let t=new g(e,this.parseExpression(l.LOWEST));return this.incrementToken(),t}function w(){var e;this.incrementToken();let t=[];for(;(null===(e=this.getToken())||void 0===e?void 0:e.value)&&"}"!=this.getToken().value;)t.push(this.parseStatement());return this.incrementToken(),new x(t)}function P(){let e=this.getToken().value==o.IF;this.incrementToken(),this.incrementToken();let t=this.parseExpression(l.LOWEST);this.incrementToken();let n=w.bind(this)(),i=e?new N(t,n):new A(t,n);return i}function b(){this.incrementToken();let e=w.bind(this)();return new m(e)}function C(){let e;this.incrementToken();let t=[];for(;")"!=this.getToken().value;)this.getToken().value==o.COMMA&&(e&&t.push(e),e=void 0,this.incrementToken()),e=this.parseExpression();return e&&t.push(e),this.incrementToken(),t}function v(){this.incrementToken();let e=this.consumeToken(),t=C.bind(this)(),n=w.bind(this)();return new L(e,t,n)}function O(){var e;this.incrementToken();let t=this.parseExpression(l.LOWEST);return(null===(e=this.getToken())||void 0===e?void 0:e.value)==";"&&this.incrementToken(),new I(t)}function _(){let e=this.consumeToken(),t=new T(e.value);return t}function U(){return new d(this.consumeToken().value)}function y(){let e=this.getAfterToken();return e&&e.value==o.LPAREN?M.bind(this)():new f(o.IDENTIFIER,this.consumeToken().value)}function M(){let e=this.consumeToken(),t=C.bind(this)();return new S(e,t)}function F(){this.incrementToken();let e=this.parseExpression(l.LOWEST);return e}function G(){let e=this.consumeToken(),t=this.parseExpression(l.PREFIX),n=new k(e.type,e.value,t);return n}function Q(e,t){let n=this.consumeToken(),i=new p(n.type,n.value,e,this.parseExpression(t));return i}let H=[o.COMMA,o.RPAREN,o.SEMICOLON];var D=n(6006);let B=new class{addPrefix(e,t){this.prefixParsers.set(e,t)}addInfix(e,t){this.infixParsers.set(e,t)}getPrefixParser(e){if(void 0==e.type)throw Error("Undefined token type in getPrefixParser");return this.prefixParsers.get(e.type)}getInfixParser(e){if(void 0==e.type)throw Error("Undefined token type in getInfixParser");return this.infixParsers.get(e.type)}loadTokens(e){return e&&(this.tokenList=e),this.currentToken=0,this.afterToken=1,this}getToken(){if(!this.tokenList)throw Error("Token list is undefined.");return this.tokenList[this.currentToken]}getAfterToken(){if(!this.tokenList)throw Error("Accessing after token from token list out of bounds.");return this.tokenList[this.afterToken]}consumeToken(){let e=this.getToken();if(!e)throw Error("Current token is undefined in consume token");return this.incrementToken(),e}consumeAfterToken(){let e=this.getAfterToken();if(!e)throw Error("Cannot consume After Token its undefined");return this.incrementToken(),this.incrementToken(),e}incrementToken(){this.currentToken++,this.afterToken++}parseExpression(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.LOWEST,t=this.parsePrefix();for(;this.getToken()&&!H.includes(this.getToken().value)&&this.getPrecedance(this.getToken())>e;)t=this.parseInfix(t,this.getPrecedance(this.getToken()));return t}parsePrefix(){let e=this.getToken();if(!e)throw Error("Token is undefined in prefixparser.");let t=this.getPrefixParser(e);if(!t)throw Error("Prefix parser for this token is undefined "+e.type);return t()}parseInfix(e,t){let n=this.getInfixParser(this.getToken());if(!n)throw Error("Infix parser for this token does not exist, "+this.getToken().type);return n(e,t)}parseStatement(){switch(this.getToken().value){case o.LET:return R.bind(this)();case o.ELSEIF:case o.IF:return P.bind(this)();case o.ELSE:return b.bind(this)();case o.FUNCTION:return v.bind(this)();case o.LBRACE:return w.bind(this)();case o.RETURN:return O.bind(this)();default:try{return this.parseExpression()}catch(e){throw Error("Dont know how to parse this statement: "+"'".concat(this.getToken().type,"'"))}}}parse(){let e=[];for(;this.getToken();)e.push(this.parseStatement());return e}getPrecedance(e){var t;if(void 0==e.type)throw Error("Cannot get precedance for undefined token type");return null!==(t=l[e.type])&&void 0!==t?t:1}getAfterPrecedance(){let e=this.getAfterToken();if(!e)throw Error("next token in getAfterPrecedance is undefined");return this.getPrecedance(e)}constructor(e){this.tokenList=e,this.currentToken=0,this.afterToken=1,this.statements=[],this.prefixParsers=new Map,this.infixParsers=new Map,this.addPrefix(o.NUMBER,_.bind(this)),this.addPrefix(o.MINUS,G.bind(this)),this.addPrefix(o.LPAREN,F.bind(this)),this.addPrefix(o.STRING,U.bind(this)),this.addPrefix(o.IDENTIFIER,y.bind(this)),this.addInfix(o.PLUS,Q.bind(this)),this.addInfix(o.MINUS,Q.bind(this)),this.addInfix(o.ASTERISK,Q.bind(this)),this.addInfix(o.FRONT_SLASH,Q.bind(this)),this.addInfix(o.EQUALS,Q.bind(this)),this.addInfix(o.NOT_EQUAL,Q.bind(this)),this.addInfix(o.LESS_THAN,Q.bind(this)),this.addInfix(o.GREATER_THAN,Q.bind(this))}},j=new class{loadString(e){return this.input=e,this.position=0,this.afterPosition=1,this}lex(){let e=[],t=this.getCharacter();for(;t;){let n=this.getToken();if(!n)break;e.push(n),this.incrementPosition(),t=this.getCharacter()}return e}incrementPosition(){this.position++,this.afterPosition++}getNextCharacter(){if(!this.input||this.input.length<this.afterPosition)throw Error("getNextCharacter is out of bounds.");return this.input[this.afterPosition]}getCharacter(){if(!this.input||this.input.length<this.position)throw Error("Called getCharacter out of bounds");return this.input[this.position]}consumeCharacter(){let e=this.getCharacter();return this.incrementPosition(),e}getToken(){this.skipWhitespace();let e=this.getCharacter();return c(e)?this.tokenizeIdentifier():u(e)?this.tokenizeNumber():e&&(e==o.EXCLAMATION_MARK||"|"==e||e==o.LESS_THAN||e==o.GREATER_THAN||e==o.ASSIGN)?this.tokenizeBoolean():'"'==this.getCharacter()||"'"==this.getCharacter()?a.bind(this)():this.createToken(e,e)}tokenizeIdentifier(){let e=this.getCharacter(),t=this.getNextCharacter();for(;c(t)||u(t);)e+=t,this.incrementPosition(),t=this.getNextCharacter();return h.has(e)?this.createToken(h.get(e),e):this.createToken(o.IDENTIFIER,e)}tokenizeNumber(){let e=this.getCharacter(),t=this.getNextCharacter();for(;u(t)||"."===t;)e+=t,this.incrementPosition(),t=this.getNextCharacter();return this.createToken(o.NUMBER,e)}tokenizeBoolean(){let e=function(e,t){switch(e){case"=":if("="==t)return new r(o.EQUALS,o.EQUALS);case"!":if("="==t)return new r(o.NOT_EQUAL,o.NOT_EQUAL);case"<":if("="==t)return new r(o.LESSEQUAL_THAN,o.LESSEQUAL_THAN);case">":if("="==t)return new r(o.GREATEREQUAL_THAN,o.GREATEREQUAL_THAN);case"|":if("|"==t)return new r(o.LOG_OR,o.LOG_OR);case"&":if("&"==t)return new r(o.LOG_AND,o.LOG_AND);default:return new r(e,e)}}(this.getCharacter(),this.getNextCharacter());return e.value.length>1&&this.incrementPosition(),e}skipWhitespace(){let e=this.getCharacter();for(;" "==e||"	"==e||"\n"==e||"\r"==e;)this.incrementPosition(),e=this.getCharacter()}createToken(e,t){if(e&&t)return new r(e,t)}getTypeFromCharValue(e){let t=Object.entries(o).filter(t=>t[1]==e);return t[0]?t[0][0]:void 0}constructor(e){this.input=e,this.position=0,this.afterPosition=1}};function z(){let[e,t]=(0,D.useState)(null);return(0,i.jsxs)("div",{className:"max-w-full",children:[(0,i.jsx)("div",{className:"max-h-[20rem] overflow-y-auto bg-zinc-200 dark:bg-zinc-800 rounded ",children:(0,i.jsx)("pre",{className:"text-sm p-4 max-w-full",children:JSON.stringify(null!=e?e:"Write some input to see the generated AST show up here.",null,2)})}),(0,i.jsxs)("form",{className:"py-6 w-full flex space-x-2",onSubmit:e=>{e.preventDefault();let n=new FormData(e.currentTarget),i=n.get("prompt"),r=function(e){let t;try{t=B.loadTokens(j.loadString(e).lex()).parse()}catch(e){return e.message}return t}(i);console.log(r),t(r)},children:[(0,i.jsx)("label",{className:"pr-4 text-base",children:"Input:"}),(0,i.jsx)("input",{className:"grow text-black text-base rounded-sm px-4 py-2 w-full  outline outline-2 focus:outline-blue-700",type:"text",name:"prompt",placeholder:"Input some syntax",defaultValue:"let a=1;"}),(0,i.jsx)("button",{className:"px-4 py-2 bg-blue-500 text-white",children:"Run!"})]})]})}}}]);